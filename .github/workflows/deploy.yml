# ... (bagian atas sama) ...
      with:
        host: ${{ secrets.VPS_HOST }}
        username: ${{ secrets.VPS_USER }}
        key: ${{ secrets.SSH_PRIVATE_KEY }}
        port: 22
        script: |
          export PNPM_HOME="/home/daylight/.local/share/pnpm"
          export PATH="$PNPM_HOME:$PATH"

          # Cek versi dulu untuk memastikan pnpm sudah terbaca
          echo "Node version: $(node -v)"
          echo "PNPM version: $(pnpm -v)"

          cd daylight
          git pull origin production

          # --- BACKEND SETUP ---
          echo "ğŸš€ Starting Backend Build..."
          cd backend-daylight
          pnpm install            
          pnpm prisma generate     
          
          echo "ğŸ—„ï¸ Migrating Database..."
          pnpm prisma migrate deploy

          pnpm build
          cd ..

          # --- FRONTEND SETUP ---
          echo "ğŸš€ Starting Frontend Build..."
          cd frontend-daylight
          pnpm install
          pnpm build
          cd ..

          # --- RESTART SERVICES ---
          echo "ğŸ”„ Restarting PM2..."
          pm2 restart all
          pm2 save
          
          echo "âœ… Deployment Success!"